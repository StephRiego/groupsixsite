{% extends "layout/base.html" %}

{% block title %}Edit User{% endblock %}

{% block content %}
<div class="p-4 max-w-md mx-auto mt-10 bg-white rounded shadow">
  <h2 class="text-xl font-semibold mb-4">Edit User: {{ user.username }}</h2>

  {% if messages %}
    {% for message in messages %}
      <div class="mb-2 px-3 py-2 rounded 
        {% if message.tags == 'error' %}bg-red-200 text-red-800{% elif message.tags == 'success' %}bg-green-200 text-green-800{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

  <form method="post" action="">
    {% csrf_token %}
    
    <label for="full_name" class="block mb-1 font-medium">Full Name</label>
    <input type="text" id="full_name" name="full_name" value="{{ user.full_name }}"
           class="w-full mb-4 px-3 py-2 border rounded" required>

    <label for="email" class="block mb-1 font-medium">Email</label>
    <input type="email" id="email" name="email" value="{{ user.email }}"
           class="w-full mb-4 px-3 py-2 border rounded" required>

    <label for="username" class="block mb-1 font-medium">Username</label>
    <input type="text" id="username" name="username" value="{{ user.username }}"
           class="w-full mb-4 px-3 py-2 border rounded" required>

    <label for="gender" class="block mb-1 font-medium">Gender</label>
    <select id="gender" name="gender" class="w-full mb-4 px-3 py-2 border rounded" required>
      {% for g in genders %}
        <option value="{{ g.gender_id }}"
          {% if user.gender and user.gender.gender_id == g.gender_id %}selected{% endif %}>
          {{ g.gender }}
        </option>
      {% endfor %}
    </select>

    <div class="flex justify-end space-x-2">
      <a href="{% url 'user_list' %}"
         class="px-4 py-2 border rounded hover:bg-gray-100">
        Cancel
      </a>
      <button type="submit"
              class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
        Save Changes
      </button>
    </div>
  </form>
</div>
{% endblock %}
